---
date: 2025-07-23
aliases:
  - 黑马Redis[13-20]
tags:
  - Java客户端的Redis
  - Jedis连接池
---
## Redis的Java客户端
---
#### 1、允许远程连接并关闭防火墙
```shell
#打开设置文件
vim /etc/redis/redis.conf
#修改其中的bind和protect
bind 0.0.0.0 -::1
protected-mode no

#检测是否成功
ss -tunlp | grep 6379
#重启redis
sudo systemctl restart redis
```
#### 2、查看key的数据类型
```shell
type key
```
#### 3、在maven中导入依赖
```xml
<!--pom.xml-->
<dependency>  
  <groupId>redis.clients</groupId>  
  <artifactId>jedis</artifactId>  
  <version>3.7.0</version>  
</dependency>
```
#### 4、编写测试类
```java
public class jedisTest {  
    private Jedis jedis;  
  
    @Before  
    public void setUp() throws Exception {  
//      1、建立连接  
        jedis=new Jedis("192.168.88.130",6379);  
//      2、设置密码  
//      3、选择库  
        jedis.select(0);  
    }  
  
    @Test  
    public void test1(){  
//      存入数据  
        String set = jedis.set("name", "mzc");  
        System.out.println(set);  
//      获取数据  
        String s = jedis.get("name");  
        System.out.println(s);  
//      获取所有的key  
        Set<String> keys = jedis.keys("*");  
        for (String key : keys) {  
            System.out.println(key);  
        }  
    }  
    @After  
    public void tearDown(){  
        if(jedis!=null){  
           jedis.close();  
    }  
}
}
```

## Jedis连接池
---
#### 1、概念
	jedis本身线程不安全，并且频繁的创建和销毁会损耗性能，使用连接池取代直连
#### 2、配置连接池
```java
public class JedisFactory {  
    private static final JedisPool jedisPool;  
    static{  
//      1、配置连接池  
        JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();  
//      最大连接数  
        jedisPoolConfig.setMaxTotal(8);  
        jedisPoolConfig.setMaxIdle(8);   //最大空闲连接，即最大可以存在池子里的空连接为8个  
        jedisPoolConfig.setMinIdle(0);  //最小空闲连接，至少有多少个空闲的连接  
        jedisPoolConfig.setMaxWaitMillis(1000); //当池中没有空闲连接，等待多长时间就会出错，默认为无限  
//       2、创建连接池对象  
//          参数列表：配置、IP地址、端口号、超时时间、密码  
        jedisPool=new JedisPool(jedisPoolConfig,"192.168.88.130",6379,1000);  
    }  
  
//  其它地方获取连接  
    public static Jedis getJedis(){  
        return jedisPool.getResource();  
    }  
}
```
#### 3、其它方法进行调用
```java
public class jedisTest {  
    private Jedis jedis;  
  
    @Before  
    public void setUp() throws Exception {  
//      1、建立连接  
        jedis= JedisFactory.getJedis();  
//      3、选择库  
        jedis.select(0);  
    }
}
```
